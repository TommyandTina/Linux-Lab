
root@salvator-x:~# find /sys/devices/platform/soc/ee0c0100.usb/ -name sd*
/sys/devices/platform/soc/ee0c0100.usb/usb5/5-1/5-1:1.0/host1/target1:0:0/1:0:0:0/block/sda
/sys/devices/platform/soc/ee0c0100.usb/usb5/5-1/5-1:1.0/host1/target1:0:0/1:0:0:0/block/sda/sda1
root@salvator-x:~# 
root@salvator-x:~# mount /dev/sda1 /mnt
[  369.327342] EXT4-fs (sda1): mounted filesystem a0f764ae-8a75-41cb-a067-cb7cbed8b416 r/w with ordered data mode. Quota mode: none.
root@salvator-x:~# 
root@salvator-x:~# dd if=/dev/urandom of=/tmp/file-300M bs=1M count=300; sync
300+0 records in
300+0 records out
314572800 bytes (315 MB, 300 MiB) copied, 3.52428 s, 89.3 MB/s
root@salvator-x:~# 
root@salvator-x:~# cp /tmp/file-300M /mnt

Plug out usb immediately!

[  376.951180] usb 5-1: USB disconnect, device number 2
[  376.994365] device offline error, dev sda, sector 296960 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.004364] device offline error, dev sda, sector 297200 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.014432] device offline error, dev sda, sector 297440 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.024373] device offline error, dev sda, sector 297680 op 0x1:(WRITE) flags 0x4000 phys_seg 4 prio class 2
[  377.034301] device offline error, dev sda, sector 297920 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.044215] device offline error, dev sda, sector 298160 op 0x1:(WRITE) flags 0x4000 phys_seg 4 prio class 2
[  377.054122] device offline error, dev sda, sector 298400 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.064032] device offline error, dev sda, sector 298640 op 0x1:(WRITE) flags 0x4000 phys_seg 11 prio class 2
[  377.074025] device offline error, dev sda, sector 298880 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.083930] device offline error, dev sda, sector 299120 op 0x1:(WRITE) flags 0x4000 phys_seg 3 prio class 2
[  377.120982] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 39160)
[  377.133323] buffer_io_error: 24566 callbacks suppressed
[  377.133333] Buffer I/O error on device sda1, logical block 36864
[  377.145175] Buffer I/O error on device sda1, logical block 36865
[  377.151259] Buffer I/O error on device sda1, logical block 36866
[  377.157333] Buffer I/O error on device sda1, logical block 36867
[  377.159554] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 41208)
[  377.163396] Buffer I/O error on device sda1, logical block 36868
[  377.179888] Buffer I/O error on device sda1, logical block 36869
[  377.185953] Buffer I/O error on device sda1, logical block 36870
[  377.192014] Buffer I/O error on device sda1, logical block 36871
[  377.198077] Buffer I/O error on device sda1, logical block 36872
[  377.201219] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 43256)
[  377.204135] Buffer I/O error on device sda1, logical block 36873
[  377.242819] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 45304)
[  377.281291] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 47352)
[  377.298481] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 49400)
[  377.354187] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 51448)
[  377.392396] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 53496)
[  377.430671] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 55544)
[  377.468933] EXT4-fs warning (device sda1): ext4_end_bio:343: I/O error 17 writing to inode 12 starting block 57592)
[  377.638095] Buffer I/O error on dev sda1, logical block 15237120, lost sync page write
[  377.647805] JBD2: I/O error when updating journal superblock for sda1-8.
[  377.654649] Aborting journal on device sda1-8.
[  377.656711] EXT4-fs error (device sda1): ext4_check_bdev_write_error:224: comm kworker/u17:7: Error while async write back metadata
[  377.660556] EXT4-fs error (device sda1): ext4_journal_check_start:84: comm cp: Detected aborted journal
[  377.670991] EXT4-fs error (device sda1) in ext4_reserve_inode_write:5761: Journal has aborted
[  377.690436] Buffer I/O error on dev sda1, logical block 15237120, lost sync page write
[  377.698499] JBD2: I/O error when updating journal superblock for sda1-8.
[  377.699199] Buffer I/O error on dev sda1, logical block 0, lost sync page write
[  377.712578] EXT4-fs (sda1): previous I/O error to superblock detected
[  377.719146] Buffer I/O error on dev sda1, logical block 0, lost sync page write
[  377.726625] EXT4-fs (sda1): I/O error while writing superblock
[  377.726632] EXT4-fs (sda1): I/O error while writing superblock
[  377.732643] Buffer I/O error on dev sda1, logical block 0, lost sync page write
[  377.738353] EXT4-fs (sda1): Remounting filesystem read-only
[  377.745686] EXT4-fs (sda1): I/O error while writing superblock
cp: error writing '/mnt/file-300M': Input/output error
root@salvator-x:~# [  377.788876] sd 1:0:0:0: [sda] Synchronizing SCSI cache
[  377.794260] sd 1:0:0:0: [sda] Synchronize Cache(10) failed: Result: hostbyte=0x01 driverbyte=DRIVER_OK

root@salvator-x:~#  
root@salvator-x:~# 
Plug in usb!

[  385.532661] usb 5-1: new high-speed USB device number 3 using ehci-platform
[  385.696062] usb-storage 5-1:1.0: USB Mass Storage device detected
[  385.703609] scsi host2: usb-storage 5-1:1.0
[  386.722620] scsi 2:0:0:0: Direct-Access     SanDisk  Extreme Pro      0    PQ: 0 ANSI: 6
[  386.733739] sd 2:0:0:0: [sdb] 250085376 512-byte logical blocks: (128 GB/119 GiB)
[  386.742223] sd 2:0:0:0: [sdb] Write Protect is off
[  386.748095] sd 2:0:0:0: [sdb] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
[  386.767133]  sdb: sdb1
[  386.770556] sd 2:0:0:0: [sdb] Attached SCSI removable disk

root@salvator-x:~#  
root@salvator-x:~# 
root@salvator-x:~# find /sys/devices/platform/soc/ee0c0100.usb/ -name sd*
/sys/devices/platform/soc/ee0c0100.usb/usb5/5-1/5-1:1.0/host2/target2:0:0/2:0:0:0/block/sdb
/sys/devices/platform/soc/ee0c0100.usb/usb5/5-1/5-1:1.0/host2/target2:0:0/2:0:0:0/block/sdb/sdb1
root@salvator-x:~# 
root@salvator-x:~# mount /dev/sdb1 /mnt
[  390.546127] EXT4-fs (sdb1): recovery complete
[  390.550586] EXT4-fs (sdb1): mounted filesystem a0f764ae-8a75-41cb-a067-cb7cbed8b416 r/w with ordered data mode. Quota mode: none.
root@salvator-x:~# 
root@salvator-x:~# cp /tmp/file-300M /mnt
root@salvator-x:~# 
root@salvator-x:~# md5sum /tmp/file-300M /mnt/file-300M
9c568b001345656afdd4cc1e901eb430  /tmp/file-300M
9c568b001345656afdd4cc1e901eb430  /mnt/file-300M
root@salvator-x:~# 
root@salvator-x:~# umount /mnt
[  416.785332] EXT4-fs (sdb1): unmounting filesystem a0f764ae-8a75-41cb-a067-cb7cbed8b416.
root@salvator-x:~# 
root@salvator-x:~# umount /mnt
[  418.156875] EXT4-fs (sda1): unmounting filesystem a0f764ae-8a75-41cb-a067-cb7cbed8b416.
root@salvator-x:~# 
 
#### Result: OK ####

NOTICE:  BL2: R-Car Gen3 Initial Program Loader(CA57) Rev.4.0.0
NOTICE:  BL2: PRR is R-Car M3N Ver.1.1
NOTICE:  BL2: Board is Salvator-XS Rev.1.0
NOTICE:  BL2: Boot device is HyperFlash(160MHz)
NOTICE:  BL2: LCM state is CM
NOTICE:  AVS setting succeeded. DVFS_SetVID=0x53
NOTICE:  BL2: DDR3200(rev.0.42)
NOTICE:  BL2: [COLD_BOOT]
NOTICE:  BL2: DRAM Split is OFF
NOTICE:  BL2: QoS is default setting(rev.0.09)
NOTICE:  BL2: DRAM refresh interval 1.95 usec
NOTICE:  BL2: Periodic Write DQ Training
NOTICE:  BL2: CH0: 400000000 - 47fffffff, 2 GiB
NOTICE:  BL2: FDT at 0xe6324d78
NOTICE:  BL2: v2.9(release):9cdb21f75-dirty
NOTICE:  BL2: Built : 08:04:40, Sep 13 2024
NOTICE:  BL2: Normal boot
NOTICE:  BL2: dst=0xe6324600 src=0x8180000 len=512(0x200)
NOTICE:  BL2: dst=0x43f00000 src=0x8180400 len=6144(0x1800)
NOTICE:  rcar_file_len: len: 0x0003e000
NOTICE:  BL2: dst=0x44000000 src=0x81c0000 len=253952(0x3e000)
NOTICE:  rcar_file_len: len: 0x00200000
NOTICE:  BL2: dst=0x44100000 src=0x8200000 len=2097152(0x200000)
NOTICE:  rcar_file_len: len: 0x00100000
NOTICE:  BL2: dst=0x50000000 src=0x8640000 len=1048576(0x100000)
NOTICE:  BL2: Booting BL31


U-Boot 2020.10 (Sep 13 2024 - 08:08:36 +0000)

CPU: Renesas Electronics R8A77965 rev 1.1
Model: Renesas Salvator-X 2nd version board based on r8a77965
DRAM:  1.9 GiB
RAM Configuration:
Bank #0: 0x048000000 - 0x0bfffffff, 1.9 GiB

MMC:   sd@ee100000: 0, sd@ee140000: 1, sd@ee160000: 2
Loading Environment from MMC... OK
In:    serial@e6e88000
Out:   serial@e6e88000
Err:   serial@e6e88000
Net:   eth0: ethernet@e6800000
Hit any key to stop autoboot:  0
=> setenv ethaddr 2e:09:0a:06:d9:e8
=> setenv serverip 192.168.8.8
=> setenv ipaddr 192.168.8.56
=> tftp 0x70000000 long.trinh-tien/Image
Using ethernet@e6800000 device
TFTP from server 192.168.8.8; our IP address is 192.168.8.56
Filename 'long.trinh-tien/Image'.
Load address: 0x70000000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ######################
         9.7 MiB/s
done
Bytes transferred = 33716736 (2027a00 hex)
=>
=> ext4write mmc 1:1 0x70000000 /boot/Image 0x2026a00
File System is consistent
file found, deleting
update journal finished
File System is consistent
update journal finished
33712640 bytes written in 536 ms (60 MiB/s)
=> tftp 0x70000000 long.trinh-tien/M3N_full/r8a77965-salvator-xs.dtb
Using ethernet@e6800000 device
TFTP from server 192.168.8.8; our IP address is 192.168.8.59
Filename 'long.trinh-tien/M3N_full/r8a77965-salvator-xs.dtb'.
Load address: 0x70000000
Loading: #####
         7.6 MiB/s
done
Bytes transferred = 71628 (117cc hex)
=>
=>  ext4write mmc 1 0x70000000 /boot/r8a77965-salvator-xs.dtb 0x117cc
File System is consistent
update journal finished
71628 bytes written in 51 ms (1.3 MiB/s)
=>



root@salvator-x:~# ls
root@salvator-x:~# tftp -g -r core-image-weston-salvator-x.tar.bz2 192.168.8.8
root@salvator-x:~# ls
core-image-weston-salvator-x.tar.bz2
root@salvator-x:~#
root@salvator-x:~# fdisk /dev/mmcblk0

Welcome to fdisk (util-linux 2.39.3).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.


Command (m for help): d
Partition number (1,2, default 2): d
Value out of range.
Partition number (1,2, default 2):

Partition 2 has been deleted.

Command (m for help): d
Selected partition 1
Partition 1 has been deleted.

Command (m for help):


Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p):

Using default response p.
Partition number (1-4, default 1):
First sector (2048-61071359, default 2048):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-61071359, default 61071359): +5G

Created a new partition 1 of type 'Linux' and of size 5 GiB.
Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table
[ 1626.172603]  mmcblk0: p1
root@salvator-x:~# mkfs.ext4 -O ^metadata_csum /dev/mmcblk0p1
mke2fs 1.47.0 (5-Feb-2023)
/dev/mmcblk0p1 contains a ext4 file system
        last mounted on Mon Sep 16 08:03:18 2024
Proceed anyway? (y,N) y
Discarding device blocks: done
Creating filesystem with 262144 4k blocks and 65536 inodes
Filesystem UUID: 1daac761-29cb-4f5b-96c7-54ad73cce67f
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376

Allocating group tables: done
Writing inode tables: done
Creating journal (8192 blocks): done
Writing superblocks and filesystem accounting information: done

root@salvator-x:~# mount /dev/mmcblk0p1 /mnt/usb
root@salvator-x:~# cd /mnt/usb
root@salvator-x:/mnt/usb# tar -xvf core-image-weston-salvator-x.tar.bz2
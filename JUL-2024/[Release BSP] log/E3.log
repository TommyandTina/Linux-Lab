root@ebisu:~#  tftp -g -r core-image-weston-ebisu.tar.bz2 192.168.8.8
root@ebisu:~# ls
core-image-weston-ebisu.tar.bz2
root@ebisu:~#
root@ebisu:~# fdisk /dev/mmcblk0

The number of cylinders for this disk is set to 954240.
There is nothing wrong with that, but this is larger than 1024,
and could in certain setups cause problems with:
1) software that runs at boot time (e.g., old versions of LILO)
2) booting and partitioning software from other OSs
   (e.g., DOS FDISK, OS/2 FDISK)

Command (m for help): d
Selected partition 1

Command (m for help): d
No partition is defined yet!

Command (m for help): n
Partition type
   p   primary partition (1-4)
   e   extended

Partition type
   p   primary partition (1-4)
   e   extended
p
Partition number (1-4): 1
First sector (16-61071359, default 16):
Using default value 16
Last sector or +size{,K,M,G,T} (16-61071359, default 61071359): +5G

Command (m for help): t
Selected partition 1
Hex code (type L to list codes): 83

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table
[  282.708848]  mmcblk0: p1
root@ebisu:~# [  282.757269]  mmcblk0: p1

root@ebisu:~#
root@ebisu:~#  mkfs.ext4 -O ^metadata_csum /dev/mmcblk0p1
mke2fs 1.47.0 (5-Feb-2023)
Discarding device blocks: done
Creating filesystem with 1310720 4k blocks and 327680 inodes
Filesystem UUID: bc54bc5c-c0e4-480c-8bef-cff3e493b1d9
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736

Allocating group tables: done
Writing inode tables: done
Creating journal (16384 blocks): done
Writing superblocks and filesystem accounting information: done

root@ebisu:~#
root@ebisu:~# mount /dev/mmcblk0p1 /mnt
[  110.371843] EXT4-fs (mmcblk0p1): mounted filesystem with ordered data mode. Opts: (null)
root@ebisu:~/test# tar -xf core-image-weston-ebisu.tar.bz2 -C /mnt/

=> ext4ls mmc 2
<DIR>       4096 .
<DIR>       4096 ..
<DIR>      16384 lost+found
<SYM>          7 bin
<DIR>       4096 boot
<DIR>       4096 dev
<DIR>       4096 etc
<DIR>       4096 home
<SYM>          7 lib
<DIR>       4096 media
<DIR>       4096 mnt
<DIR>       4096 proc
<DIR>       4096 run
<SYM>          8 sbin
<DIR>       4096 srv
<DIR>       4096 sys
<DIR>       4096 tmp
<DIR>       4096 usr
=> ext4write mmc 2 0x70000000 /boot/Image 0x2027a00
Journal Scan Completed
Recovery required
Journal Recovery Completed
file found, deleting
update journal finished
File System is consistent
update journal finished
33716736 bytes written in 605 ms (53.1 MiB/s)
=>
=> tftp 0x70000000 da.trinh-xuan/e34d/$dtb
Using ethernet@e6800000 device
TFTP from server 192.168.8.8; our IP address is 192.168.8.56
Filename 'da.trinh-xuan/e34d/r8a77990-ebisu-4d.dtb'.
Load address: 0x70000000
Loading: ####
         7.8 MiB/s
done
Bytes transferred = 56930 (de62 hex)
=> ext4write mmc 2 0x70000000 /boot/$dtb 0xde62
File System is consistent
update journal finished
56930 bytes written in 96 ms (579.1 KiB/s)
=>

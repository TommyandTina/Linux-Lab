- xem package
	snap list |grep -v canonical
	apt-mark showmanual

-copy:
	cp -u from to : copy cái mới hơn
	cp -r from to: copy recursively
	cp -L from to : copy file gốc (thay vì copy symbolic link)
	find /path/to/source/directory -name 'r8*.dtb' -exec cp {} /path/to/destination/directory \; (copy file với điều kiện; {} là placeholder đem link ở find qua; \ là dừng exec)
	cp $(find . -name 'r8*.dtb') /path/to/destination/directory (ko nên xài khi có quá nhiều file, lệnh này ghi đè)
	rsync -R /usr/sbin/mkfs /đường_dẫn_đích : giữ nguyên cấu trúc khi copy VD: /usr/lib/opkg/alternatives/mkfs.ext2 vào thư mục /home/user -> /home/user/usr/lib/opkg/alternatives/mkfs.ext2
	(COPY mkfs và lsblk vào root mới - đứng ở thư mục rootfs cũ chứa lsblk : sudo rsync -Rl $(find . -name '*mkfs*' 2>/dev/null) ../../E3_full/rootfs/)
	rsync -rl thì chỉ copy như 'cp' chứ không vào đúng thư mục
-remove:
	rm -rf:xóa sạch folder + file

- xem os,lsb version:
	cat /etc/os-release
	cat /etc/lsb-release
	lsb_release

- dry run rm:
	ls -R folder/

- copy file tới ssh:
	scp [other options] [source username@IP]:/[directory and file name] [destination username@IP]:/[destination directory]
	scp "C:\Users\long.trinh-tien\.ssh\id_rsa.pub" long.trinh-tien@192.168.2.25:~/.ssh ; sau đó lưu dưới tên authorized_keys

- Xem version của package:
	apt-show-versions name_of_package (chỉ show được package đã cài)
	apt show <package>

- Kiểm tra file trước khi xóa
	find [path-cần-kiểm-tra] -type d -exec echo '{}' \;

- ls, ll, l, la, tree -L num_of_child : xem file và thư mục
	ls -1 : xem list theo hàng dọc
		

- Xem thời gian execute:
	Linux: time + command
	Powershell: Measure-Command {.\do_something.ps1}

- Tạo nhiều thư mục:
	mkdir -p "$directory/another_dir/another_dir2"
	Hay được sử dụng với kiểm tra các thư mục có tồn tại hay ko : if[! -d "$directory"]; then ... fi

- đã cài thêm: apt-get
	pkg-config libx11-dev libxkbcommon-dev libxrandr-dev libxinerama-dev libxcursor-dev libxi-dev (doxygen >200MB) (mesa-common-dev 175MB)
	(raspi) :bison, flex, libssl-dev, libncurses-dev


-cross-compiler arm64 from linux: 
	export PATH=~/tools/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin:$PATH
	make ARCH=arm CROSS_COMPILE=aarch64-linux-gnu-

-Cách xài putty serial: 
	vào /dev/ttxx kiểm tra xem device mới input vào, kiểm tra baudrate/speed (rasp 115200)

- Cách xài docker
	viết Dockerfile FROM:ubuntu + command install package (nhớ -y)
	docker build -t name_in_lowercase . (tại thư mục chứa Dockerfile)
	docker run -it name_in_lowercase bash : tạo mới container
	docker run -rm name_in_lowercase: chạy xong xóa luôn container : để demo sản phẩm
	docker start nameOfContainer : khởi chạy container đã run ở trên
	docker attach nameOfContainer : vào trong container đó

- Cách để process chạy trên background (on shell only)
	Cho process chạy (VD: sleep 60s)
	Ấn Ctrl+Z để suspend process đó (hiện tại thì đang dừng)
	Ấn 'jobs' để xem các job đang suspend và lấy job_id (do chạy trên shell nên ta lấy job_id thay vì PID)
	Ấn 'bg job_id' (để chạy background) hoặc 'fg job_id' (để chạy foreground)

- Đợi 1 process khác xong
	Dùng hàm 'wait'

- Kill 1 process bất kì
	Ấn 'ps' (xem process của user chạy) 'ps -x' (process + command liên quan tới user) 'ps -u' (nhiều thông tin hơn)
	Hoặc ấn 'top' để xem toàn bộ process đang chạy
	Lấy PID và ấn 'kill -9 PID' là kill được 
	Kill hết background : kill $(jobs -p)

- Mount 1 folder từ máy khác trong lan vào máy mình
	Install sshfs
		$ sudo apt-get install sshfs

	2.Create local mount point

		$ mkdir /home/johndoe/sshfs-path/

	3.Mount remote folder /remote/path to /home/johndoe/sshfs-path/

		$ sshfs -o allow_other remoteuser@111.222.333.444:/remote/path /home/johndoe/sshfs-path/

	And finally, to umount ...
		$ fusermount -u /home/johndoe/sshfs-path/

-Nén và giải nén zip
	zip -r name.zip folder
	unzip name.zip -d /path/dir
	tar -cf folder (nén tar.gz)
	tar -xf folder.tar.gz (giải nén)

- Search trong file/tên file và trong lịch sử commit:
	git grep "word" 
	git ls-files "*name_of_file_to_search*"
	git log -p -S "commit_search"
	ack -g "name_file"
	grep -Rnw '/path/to/somewhere/' -e 'pattern' (-r or -R is recursive ; use -R to search entirely; -n is 
		line number; -w stands for match the whole word.
	grep -rn "sata" .

- Kiểm tra các file .pc khi sử dụng poky cross toolchains (đôi khi nó include 1 package mà máy ta không có -> lỗi)
	Xóa file hoặc unset PKG_CONFIG_PATH

- Kiểm tra md5sum xem file có giống nhau không
	md5sum FileName

- Kiểm tra pico có ai đang xài không
	ps aux | grep pico

- Kiểm tra tiến trình call gì 
	strace -p PID
- Truyền pass vào sudo:
	echo Pass1234 |sudo -S 'command go here'
- Spam 
	yes "word"

- Logout user
	sudo pkill -KILL -u username

- Lọc và đếm tổng số lượng unique 
	awk '{print $1}' example.txt | uniq | wc -l hoặc awk '{print $1}' example.txt | sort | uniq | wc -l

- chmod mọi thứ
	chmod -R 777 path/to/change/mode

- vim
	thêm dòng cuối : Shift+g (hoặc ctrl +d)  o
	thêm dòng đầu : gg (hoặc ctrl + u) shift+o
	exit và lưu ":wq"
	tới cuối dòng  $
	tới cuối trang :$ hoặc ctrl + end
	undo ctrl+u
	search : /word		next search: n
	tới 1 dòng bất kì : xxgg VD: 81gg
	copy (yank) xx dòng: xxyy VD: 10yy
	comment nhiều dòng (visual block) : ctrl+V -> tới dòng cuối muốn comment -> shift I (xóa thì ấn x) -> // hoặc # -> esc
	Tìm nhanh từ tiếp theo *, tìm nhanh từ trước đó #
	replace : :%s#rmmod sata_rcar.ko#rmmod ~/sata_rcar.ko#g hoặc :%s/rmmod sata_rcar.ko/rmmod ~sata_rcar.ko/g

- tải package mannually bằng apt/apt-get
	apt download htop
	apt-get download libxml2-dev:arm64 (để cho arm64)
	dpkg-deb -x package.deb . Để giải nén

- để cài thủ công package cho poky toolchain/rootfs bất kì
	echo $SDKTARGETSYSROOT -> xem path sysroot
	pkg-config --variable=pc_path pkg-config -> xem nơi các file *.pc được đọc từ toolchain
	Chép file .pc vào rồi kiểm tra lại path include và link library trong file đó
	Thêm lib, module vào 
	
	Với file exec (trong bin hoặc sbin khi ta gõ lệnh nó sẽ hiện như htop) thì cần tìm tên
		readelf -d /path/to/bin
		objdump -x /path/to/bin (chưa test)
		Xong find các lib và chép qua

- find 
	find . -type f/d -name '*pattern*'
	Xóa hết trừ những thư mục ... : find /path/to/directory -mindepth 1 -maxdepth 1 ! -name 'bin' ! -name 'boot' ! -name 'dev' ! -name 'etc' ! -name 'home' ! -name 'lib' ! -name 'media' ! -name 'mnt' ! -name 'proc' ! -name 'root' ! -name 'run' ! -name 'sbin' ! -name 'srv' ! -name 'sys' ! -name 'tmp' ! -name 'usr' ! -name 'var' -exec rm -rf {} \;


- dùng locate tìm
	locate pattern (chưa test kỹ)

- copy file giữ path (để xài cho việc chép vào poky)
	rsync -avR $(find . -name '*pciaccess*') destination_directory

- xem module info
	modinfo *.ko
	mobprobe ?
	depmod ?
	insmod + rmmod
	
- config linux kernel version magic
	Thông thường nếu ta không config gì thì version magic sẽ ra dạng : version.random_number. EX: 5.10.218.123456489
	Để thay đổi số version, ta vào Makefile ở thư mục ngoài cùng của kernel sẽ thấy các mục để thay đổi
		VERSION = 5
		PATCHLEVEL = 10
		SUBLEVEL = 218
		EXTRAVERSION =
	Và để thêm ngay sau version 1 dòng chữ thì thêm LOCALVERSION (thêm trực tiếp trên cmd )
		make -j16 modules LOCALVERSION=-yocto-standard
	Để xóa phần random_number thì tắt (comment)
		LOCALVERSION_AUTO=y
	https://stackoverflow.com/questions/19333918/dont-add-to-linux-kernel-version

- Xem dung lượng cả ổ cứng :
	df -h .
	Xem folder: du -sh .

- Xem config của board :
	zcat /proc/config.gz
- Xem device tree:
	cat /proc/device-tree/model

- Xem thời gian hoạt động của máy:
	linux: uptime
	Window: bật event viewer (eventvwr) chọn Windows Logs -> System -> Filter Current Log -> Chỗ <All Event IDs> đổi thành: 6005(bật),6006(tắt),6013(uptime),6009,6008

- Xóa dấu vân tay fingerprint ssh :
	ssh-keygen -f "/home/rvc/.ssh/known_hosts" -R "192.168.8.20"

- Quét ip
	nmap -sn 192.168.8.0/24
- Thoát ssh đang bị lag
	Enter -> ~ -> .

- yocto 
	xem thông tin về các phiên bản có trong recipe - trước khi build (inside bblayers.conf) : bitbake-layers show-recipes wayland-protocols. Sau khi build : bitbake -s wayland-protocols
	Chọn version mong muốn: conf/local.conf	: PREFERRED_VERSION_wayland-protocols = "1.33" (đảm bảo đã thêm layer đó vào bblayers.conf)
	IMAGE_INSTALL:remove = "kernel-module-cmemdrv"
	IMAGE_INSTALL += "util-linux usbutils e2fsprogs iperf3 linuxptp gcc make binutils trace-cmd"

- thêm file này vào cuối file kia:
	cat file2 >> file1  (1 dấu > là ghi đè)
	cat file2 | tee -a file1

- Bind / unbind bằng 1 command : echo Pass1234 | sudo -S tee /sys/bus/usb/drivers/usb/bind <<< "2-2"

- python
	Kill hết job nhỏ : a.send('kill $(jobs -p)')
	kill process trên os.system: echo Pass1234 | sudo -S pkill iperf3
	Kiểm tra 1 từ có xuất hiện hay không : tee vào LOG_FILE xong check_log
	Chạy 1 lệnh background và in kết quả vào file:  iperf3 -s > iperf3_result.txt &
	#Ctrl + C
    		a.send('\x03')
  	#Ctrl + z
    		a.send('\x1A')
	Đổi text hex thành int
		BIT28_CHECK = int(TMP.split()[len(TMP.split())-1],16)
	Check bit thứ 28
		if((BIT28_CHECK & (1 << 28)) == 1):
			return False
	+ Check log của board:
		    a.buff=""
			a.send('echo rd  0xe6150048 > /proc/reg')
			with open(LOG_FILE, 'w') as log_file:
				log_file.write(a.buff) #để ghi
				print(log_file.read()) #để đọc
			TMP = check_log(LOG_FILE,'mem read')
	Đọc output ko cần hàm check_log : os.popen(command).read()
			
- Truy cập ssh thông qua 2 máy : 
	ssh -J <user>@<hostB> <user>@<hostC>
	Xài trong vscode như trên, còn trong mobaxterm thì host B sẽ nhập trong jump host ở configuration
	
- ghi thông tin vào dmesg:
	echo "Hello, dmesg!" | sudo tee /dev/kmsg

- Đổi tên rootfs cho giống với config.PLATFORM
	sudo nano /etc/hostname
	sudo nano /etc/hosts
	
- Thêm vào bootargs:
	quiet loglevel=1 : giảm log
	
- Tìm file mới sinh ra có dung lượng lớn:
	find /path/to/directory -type f -mtime -7 -exec du -h {} + | sort -hr
	find . -type d -mtime -7 -exec du -sh {} \; | sort -hr
	